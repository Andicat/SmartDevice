"use strict";var phoneInput,anchor,closeLink,userName,userPhone,messageContent,messageLink=document.querySelector(".call"),messageForm=document.querySelector(".modal__message-form"),closeButtonLink=document.querySelector(".modal__button-close"),phoneInputList=document.querySelectorAll(".phone"),overlay=document.querySelector(".overlay"),anchorList=document.querySelectorAll(".scroll-link"),isStorageSupport=!0;try{localStorage.getItem("userName"),localStorage.getItem("userPhone"),localStorage.getItem("messageContent")}catch(e){isStorageSupport=!1}messageLink&&(userName=messageForm.querySelector("[id=name-modal]"),userPhone=messageForm.querySelector("[id=phone-modal]"),messageContent=messageForm.querySelector("[id=content-modal]"),messageLink.addEventListener("click",function(e){e.preventDefault(),overlay.classList.add("modal-show"),messageForm.classList.add("modal-show"),userName.focus()}),messageForm.addEventListener("submit",function(e){userName.value&&userPhone.value&&""!==messageContent.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userPhone",userPhone.value)):(e.preventDefault(),messageForm.classList.remove("modal-error"),messageForm.offsetWidth=messageForm.offsetWidth,messageForm.classList.add("modal-error"),userName.value?userPhone.value?""===messageContent.value&&messageContent.focus():userPhone.focus():userName.focus())})),closeButtonLink.addEventListener("click",function(e){(closeLink=e.target).parentNode.classList.contains("modal-show")&&(closeLink.parentNode.classList.remove("modal-show"),overlay.classList.remove("modal-show")),closeLink.parentNode.classList.contains("modal-error")&&closeLink.parentNode.classList.remove("modal-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),messageForm&&messageForm.classList.contains("modal-show")&&(messageForm.classList.remove("modal-show"),messageForm.classList.remove("modal-error"),overlay.classList.remove("modal-show")))}),overlay.addEventListener("click",function(){messageForm.classList.contains("modal-show")&&(messageForm.classList.remove("modal-show"),messageForm.classList.remove("modal-error"),overlay.classList.remove("modal-show"))});for(var i=0;i<phoneInputList.length;i++)(phoneInput=phoneInputList[i]).addEventListener("click",addPhone),phoneInput.addEventListener("keydown",checkPhone);function addPhone(e){var o=e.target;o.value.length||(o.value="+7(")}function checkPhone(e){var o=e.target,s=o.value.length;if(!/\d/.test(e.key)){if(8===e.keyCode)return;e.preventDefault()}0===s&&(o.value=o.value+"+7("),2===s&&(o.value=o.value+"("),6===s&&(o.value=o.value+") "),10===s&&(o.value=o.value+"-"),13===s&&(o.value=o.value+"-"),16<s&&(o.value=o.value.substring(0,o.value.length-1))}for(i=0;i<anchorList.length;i++){var blockID=(anchor=anchorList[i]).getAttribute("href").substr(1);anchor.addEventListener("click",function(e){e.preventDefault(),document.getElementById(blockID).scrollIntoView({behavior:"smooth",block:"start"})})}